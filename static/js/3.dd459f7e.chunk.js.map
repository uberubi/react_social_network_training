{"version":3,"sources":["components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Profile/MyPosts/Post/Post.module.css","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/Profile/ProfileInfo/ProfileStatusWithHooks.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx"],"names":["module","exports","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","TypeError","ProfileStatusWithHooks","props","useState","editMode","setEditMode","status","setStatus","useEffect","onChange","e","currentTarget","autoFocus","onBlur","updateStatus","onDoubleClick","ProfileInfo","profile","isOwner","savePhoto","Preloader","className","styles","descriptionBlock","userAvatar","src","photos","large","userPhoto","alt","type","target","files","Post","s","item","message","likesCount","maxLength10","maxLengthCreator","AddNewPostFormRedux","reduxForm","form","onSubmit","handleSubmit","Field","component","Textarea","name","validate","required","placeholder","MyPosts","postsElements","posts","map","p","postsBlock","values","addPost","newPostText","MyPostsContainer","connect","state","profilePage","dispatch","addPostActionCreator","Profile","ProfileContainer","userId","this","match","params","authorizedUserId","history","getUserProfile","getStatus","refreshProfile","prevProps","prevState","snapshot","console","log","React","Component","compose","auth","isAuth","withRouter"],"mappings":"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","file":"static/js/3.dd459f7e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"userAvatar\":\"ProfileInfo_userAvatar__wQ1B6\",\"descriptionBlock\":\"ProfileInfo_descriptionBlock__2oDIg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postBlock\":\"MyPosts_postBlock__3AJFl\",\"posts\":\"MyPosts_posts__O2jNo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__29NzK\"};","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nconst ProfileStatusWithHooks = (props) => {\r\n\r\n  let [editMode, setEditMode] = useState(false);\r\n  let [status, setStatus] = useState(props.status);\r\n\r\n  useEffect( () => {\r\n    setStatus(props.status)\r\n  }, [props.status])\r\n\r\n  const activateEditMode = () => {\r\n    setEditMode(true);\r\n  };\r\n\r\n  const deactivateEditMode = () => {\r\n    setEditMode(false);\r\n    props.updateStatus(status)\r\n    };\r\n\r\n  const onStatusChange = (e) => {\r\n    setStatus(e.currentTarget.value);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {!editMode ? (\r\n        <div>\r\n          <span onDoubleClick={activateEditMode}>{props.status || \"======\"}</span>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <input onChange={onStatusChange} autoFocus={true} onBlur={deactivateEditMode} value={status} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileStatusWithHooks;\r\n","import React from \"react\";\r\nimport styles from \"./ProfileInfo.module.css\";\r\nimport Preloader from \"../../common/Preloader/Preloader\";\r\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\r\nimport userPhoto from \"../../../assets/images/user_img.jpg\";\r\n\r\nconst ProfileInfo = ({profile, status, updateStatus, isOwner, savePhoto}) => {\r\n  if (!profile) {\r\n    return <Preloader />\r\n  }\r\n\r\n  const onMainPhotoSelected = (e) => {\r\n    if (e.target.files.length) {\r\n      savePhoto(e.target.files[0])\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className={styles.descriptionBlock}>\r\n        <img  className={styles.userAvatar} src={profile.photos.large || userPhoto} alt=\"profile\"/>\r\n        { isOwner && <input type={\"file\"} onChange={onMainPhotoSelected}/>}\r\n        <ProfileStatusWithHooks status={status} updateStatus={updateStatus}/>\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileInfo;","import React from \"react\";\r\nimport s from \"./Post.module.css\";\r\n\r\nconst Post = props => {\r\n  return (\r\n    <div className={s.item}>\r\n      <img src=\"https://www.kinonews.ru/insimgs/2019/newsimg/newsimg87089.jpg\"></img>\r\n      { props.message }\r\n      <div>\r\n        <span>likes</span> { props.likesCount }\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n","import React from \"react\";\r\nimport styles from \"./MyPosts.module.css\";\r\nimport Post from \"./Post/Post\";\r\nimport { reduxForm, Field } from \"redux-form\";\r\nimport { required, maxLengthCreator } from \"../../../utils/validators/validators\";\r\nimport Textarea from \"../../common/FormsControls/FormControls\"\r\n\r\nconst maxLength10 = maxLengthCreator(10)\r\n\r\nconst MyPosts = (props) => {\r\n  let postsElements = props.posts.map((p) => (\r\n    <Post message={p.message} likesCount={p.likesCount} />\r\n  ));\r\n\r\n  let onAddPost = (values) => {\r\n    props.addPost(values.newPostText);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.postsBlock}>\r\n      <h3>My posts</h3>\r\n      <AddNewPostFormRedux onSubmit={onAddPost}/>\r\n      <div className={styles.posts}>{postsElements}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nlet AddNewPostForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.handleSubmit}>\r\n      <div>\r\n        <Field component={Textarea} name=\"newPostText\" \r\n        validate ={[required, maxLength10]}\r\n        placeholder=\"put message here!\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <button>Add post</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\n\r\nlet AddNewPostFormRedux = reduxForm({form: 'ProfileAddNewPostForm'})(AddNewPostForm)\r\n\r\nexport default MyPosts;","import React from \"react\";\r\nimport { addPostActionCreator } from \"../../../redux/profile-reducer\";\r\nimport MyPosts from \"./MyPosts\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    posts: state.profilePage.posts,\r\n    newPostText: state.profilePage.newPostText\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addPost: (newPostText) => {\r\n      dispatch(addPostActionCreator(newPostText))\r\n    }\r\n  }\r\n}\r\n\r\nconst MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts)\r\n\r\nexport default MyPostsContainer;\r\n","import React from \"react\";\r\nimport styles from \"./Profile.module.css\";\r\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo\";\r\nimport MyPostsContainer from \"./MyPosts/MyPostsContainer\";\r\n\r\nconst Profile = (props) => {\r\n  return (\r\n    <div>\r\n      <ProfileInfo\r\n        savePhoto={props.savePhoto}\r\n        isOwner={props.isOwner}\r\n        profile={props.profile}\r\n        status={props.status}\r\n        updateStatus={props.updateStatus}\r\n      />\r\n      <MyPostsContainer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React from \"react\";\r\nimport Profile from \"./Profile\";\r\nimport { connect } from \"react-redux\";\r\nimport { getUserProfile, getStatus, updateStatus, savePhoto } from \"../../redux/profile-reducer\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { compose } from \"redux\";\r\n\r\nclass ProfileContainer extends React.Component {\r\n  \r\n  refreshProfile() {\r\n    let userId = this.props.match.params.userId;\r\n    if (!userId) {\r\n      userId = this.props.authorizedUserId;\r\n      if (!userId) {\r\n        this.props.history.push(\"/login\");\r\n      }\r\n    }\r\n    this.props.getUserProfile(userId);\r\n    this.props.getStatus(userId);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.refreshProfile()\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (this.props.match.params.userId != prevProps.match.params.userId)\r\n    this.refreshProfile()\r\n  }\r\n\r\n  render() {\r\n    console.log(\"PROFILE RENDER\");\r\n    return (\r\n      <Profile\r\n        {...this.props}\r\n        isOwner={!this.props.match.params.userId}\r\n        profile={this.props.profile}\r\n        status={this.props.status}\r\n        updateStatus={this.props.updateStatus}\r\n        savePhoto={this.props.savePhoto}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n  profile: state.profilePage.profile,\r\n  status: state.profilePage.status,\r\n  authorizedUserId: state.auth.userId,\r\n  isAuth: state.auth.isAuth,\r\n});\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, { getUserProfile, getStatus, updateStatus, savePhoto }),\r\n  withRouter\r\n)(ProfileContainer);\r\n"],"sourceRoot":""}